
<div class="goal-show-container">

  <div class="container-xxl goal-banner">
    <div class="goal-banner-text">
      <h2 class="goal-header"><%= @goal.name %></h2>
      <a href=<%= edit_goal_path(@goal.id) %>>
      <svg xmlns="http://www.w3.org/2000/svg" width="30px" height="28px" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"/></svg>
      </a>
      <%# link_to "Update goal",  edit_goal_path(@goal.id), class: "goal-banner-update" %>
      <p class="goal-body"><%= @goal.description %> | <%= @goal.status %></p>
    </div>

    <div class="goal-banner-image">
      <%# <img src="./assets/images/job_change.jpg" /> %>
      <% if @goal.photo.attached? %>
        <%= cl_image_tag @goal.photo.key, class: "img-fluid" %>
      <% else %>
        <%= image_tag "/assets/goal-page.jpg", class: "img-fluid" %>
      <% end %>
    </div>
  </div>

<!-- status tracker -->

  <div class="container-xxl">
    <div>
      <h3 class="library-header">Library of wisdom
      </h3>
      <p class="library-body">When a new insight is created, a book will be added to the library
      </p>
    </div>
  </div>
    <div class="big-bookcase container-xxl">
      <!--Progress-->
      <div class="one-bookcase-section">
        <div class="status-cover-container">
          <div class="status-cover-plank">
          </div>
          <div class="status-cover-text">
          <ul class="horizontal-list">
          <% @progress.each do |insight| %>
            <li>
              <div class="bookworm">
                <%= insight.name%>
              </div>
              <div class="book-container">
                <div class="book-cover" id="progress-colour">
                </div>
                <div class="book-strip-one">---
                </div>
                <div class="book-strip-two">---
                </div>
              </div>
            </li>
          <% end %>
          </ul>
          </div>
          <!--closing div for status-cover-container-->
        </div>
        <div class="status-title-container">
          <div class="status-title-plank">
          </div>
          <div class="status-title-text">Making progress on goal
          </div>
        <!--closing div for status-title-container-->
        </div>
      <!--closing div for one-bookcase-section-->
      </div>

      <!--Closer-->
      <div class="one-bookcase-section">
        <div class="status-cover-container">
          <% if @goal.accomplished? %>
            <div id="goal-accomplished">Goal <br>accomplished
            </div>
            <% else %>
            <div id="goal-not-accomplished">Goal <br>accomplished
            </div>
          <% end %>
          <div class="status-cover-plank">
          </div>
          <div class="status-cover-text">
          <ul class="horizontal-list">
          <% @closer.each do |insight| %>
            <li>
              <div class="bookworm">
                <%= insight.name%>
              </div>
              <div class="book-container">
                <div class="book-cover" id="closer-colour">
                /div>
                <div class="book-strip-one">---
                </div>
                <div class="book-strip-two">---
                </div>
              </div>
            </li>
          <% end %>
          </ul>
          </div>
          <!--closing div for status-cover-container-->
        </div>
          <div class="status-title-container">
            <div class="status-title-plank">
            </div>
              <div class="status-title-text">Getting closer to goal
              </div>
          <!--closing div for status-title-container-->
          </div>
      <!--closing div for one-bookcase-section-->
        </div>

      <!--Thinking-->
      <div class="one-bookcase-section">
        <div class="status-cover-container">
          <% if @insights.empty? %>
            <div id="got-no-insight">Goal begins</div>
            <% else %>
            <div id="got-insight"></div>
          <% end %>
          <div class="status-cover-plank">
          </div>
          <div class="status-cover-text">
            <ul class="horizontal-list">
            <% @thinking.each do |insight| %>
              <li>
                <div class="bookworm">
                  <%= insight.name%>
                </div>
                <div class="book-container">
                  <div class="book-cover" id="thinking-colour">
                  </div>
                  <div class="book-strip-one">---
                  </div>
                  <div class="book-strip-two">---
                  </div>
                </div>
              </li>
            <% end %>
            </ul>
          </div>
          <!--closing div for status-cover-container-->
        </div>
          <div class="status-title-container">
            <div class="status-title-plank">
            </div>
            <div class="status-title-text">Thinking about goal
            </div>
          <!--closing div for status-title-container-->
          </div>
      <!--closing div for one-bookcase-section-->
        </div>

      <!--Started-->
      <div class="one-bookcase-section">
        <div class="status-cover-container">
          <div class="status-cover-plank">
          </div>
          <div class="status-cover-text">
            <ul class="horizontal-list">
            <% @started.each do |insight| %>
              <li>
                <div class="bookworm">
                  <%= insight.name%>
                </div>
                <div class="book-container">
                  <div class="book-cover" id="started-colour">
                  </div>
                  <div class="book-strip-one">---
                  </div>
                  <div class="book-strip-two">---
                  </div>
                </div>
              </li>
            <% end %>
            </ul>
          </div>
          <!--closing div for status-cover-container-->
        </div>
        <div class="status-title-container">
          <div class="status-title-plank">
          </div>
          <div class="status-title-text">Getting started on goal
          </div>
        <!--closing div for status-title-container-->
        </div>
        <!--closing div for one-bookcase-section-->
      </div>
    <!--closing div for bookcase-->
  </div>


<!-- Insights section -->
<div class="container-xxl d-flex justify-content-between" id="goal-insight-container">
  <div class="insight-new p-2">
    <div class="heading-font fs-3">
      Insights
    </div>
    <div class="body-font fs-6">
      Get in touch with your inner self through free-writing. Respond to prompts that are designed to inspire you in your goal-setting journey.
    </div>
    <a href="<%= new_goal_insight_path(@goal.id) %>" id="insight-new-link">
    <%# <%= link_to new_goal_insight_path(@goal.id) do %>
      <p class="body-font mb-3 pb-2 fs-5"> Add Insight</p>
      <i class="fa-regular fa-square-plus fa-2xl insight-add"></i>
    <%# <% end %>
    </a>
  </div>

  <div class="insight-scroll">
    <% @goal.insights.each do |insight| %>
      <div class="insight-card">
        <%= render 'show_insights', insight: insight %>
      </div>
    <% end %>
  </div>
</div>

<br>

<%# Collaborators flow %>
<div class="container-xxl d-flex justify-content-between mb-3" data-controller="animation" data-animation-threshold-value="0.6">
  <div class="insight-new p-2">
    <div class="heading-font fs-3" data-animation-target="fadeInRight">
      Collabs
    </div>

    <div class="body-font fs-6" data-animation-target="fadeInRight">
      Get a fresh set of perspectives from friends. Ask your friends to share their perspectives on your insights by adding them as a collaborator.
    </div>

    <div id="collab-anchor" class="container insight-top p-0">
        <%= render 'add_collaborators' %>
    </div>
  </div>

  <div class="insight-scroll" data-animation-target="fadeInLeft">
    <% @collaborators.each do |collab| %>
      <%= render 'show_collaborators', collab: collab %>
    <% end %>
  </div>
</div>
